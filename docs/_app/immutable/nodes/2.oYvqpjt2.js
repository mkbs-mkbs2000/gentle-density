import{s as lt,e as C,O as V,t as U,p as qe,d as S,f as $,P as B,i as v,h as R,v as e,w as me,F as nt,k as G,l as r,Q as ot,m as ve,n as Fe,R as Qe,b as D,S as dt,j as k,T as P,U as ge,V as Xe,A as ut,r as ct}from"../chunks/scheduler.CGHltk3t.js";import{S as rt,i as it,b as ne,d as oe,m as de,t as ue,a as ce,e as he}from"../chunks/index.DksqkcGQ.js";import{e as we,T as ht,R as mt}from"../chunks/ReadMore.BSuu4r9j.js";import{g as ft}from"../chunks/init.CzU-s_W1.js";import{s as pt,c as vt}from"../chunks/csv.B5tH-xi6.js";import{l as _t}from"../chunks/linear.BsfsxAUK.js";import{i as Je,a as Ze}from"../chunks/isometric-laneway.DKz411nM.js";const yt=!0,Et=Object.freeze(Object.defineProperty({__proto__:null,prerender:yt},Symbol.toStringTag,{value:"Module"}));function bt(t,a){let l;if(a===void 0)for(const n of t)n!=null&&(l<n||l===void 0&&n>=n)&&(l=n);else{let n=-1;for(let s of t)(s=a(s,++n,t))!=null&&(l<s||l===void 0&&s>=s)&&(l=s)}return l}function et(t,a,l){const n=t.slice();return n[10]=a[l],n[12]=l,n}function tt(t,a,l){const n=t.slice();return n[12]=a[l],n}function at(t){let a,l,n,s,h=t[4]*t[12]/4+"",i,o;return{c(){a=V("line"),s=V("text"),i=U(h),this.h()},l(c){a=B(c,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),$(a).forEach(v),s=B(c,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,class:!0});var m=$(s);i=R(m,h),m.forEach(v),this.h()},h(){e(a,"x1",l=z+t[7](t[12]*t[4]/4)),e(a,"x2",n=z+t[7](t[12]*t[4]/4)),e(a,"y1","35"),e(a,"y2","45"),e(a,"stroke","#002b8f"),e(a,"stroke-width","1"),e(s,"x",o=z+t[7](t[12]*t[4]/4)),e(s,"y",60),e(s,"id","labelBar"),e(s,"text-anchor","start"),e(s,"class","svelte-gpuze4")},m(c,m){G(c,a,m),G(c,s,m),r(s,i)},p(c,m){m&144&&l!==(l=z+c[7](c[12]*c[4]/4))&&e(a,"x1",l),m&144&&n!==(n=z+c[7](c[12]*c[4]/4))&&e(a,"x2",n),m&16&&h!==(h=c[4]*c[12]/4+"")&&ve(i,h),m&144&&o!==(o=z+c[7](c[12]*c[4]/4))&&e(s,"x",o)},d(c){c&&(v(a),v(s))}}}function st(t){let a,l,n,s,h=t[10].city+"",i,o,c=t[10].sumCompleted+"",m,g;return{c(){a=V("rect"),s=V("text"),i=U(h),o=V("text"),m=U(c),this.h()},l(y){a=B(y,"rect",{id:!0,x:!0,y:!0,height:!0,width:!0,fill:!0,class:!0}),$(a).forEach(v),s=B(y,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,class:!0});var w=$(s);i=R(w,h),w.forEach(v),o=B(y,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,class:!0});var _=$(o);m=R(_,c),_.forEach(v),this.h()},h(){e(a,"id","bar"),e(a,"x",z),e(a,"y",t[12]*30+75),e(a,"height",20),e(a,"width",l=t[7](t[10].sumCompleted)),e(a,"fill",n="url(#"+("pattern-lines-"+t[0])+")"),e(a,"class","svelte-gpuze4"),e(s,"x",z-5),e(s,"y",t[12]*30+90),e(s,"id","labelBar"),e(s,"text-anchor","end"),e(s,"class","svelte-gpuze4"),e(o,"x",g=t[7](t[10].sumCompleted)+z+3),e(o,"y",t[12]*30+90),e(o,"id","labelBar"),e(o,"text-anchor","start"),e(o,"class","svelte-gpuze4")},m(y,w){G(y,a,w),G(y,s,w),r(s,i),G(y,o,w),r(o,m)},p(y,w){w&192&&l!==(l=y[7](y[10].sumCompleted))&&e(a,"width",l),w&1&&n!==(n="url(#"+("pattern-lines-"+y[0])+")")&&e(a,"fill",n),w&64&&h!==(h=y[10].city+"")&&ve(i,h),w&64&&c!==(c=y[10].sumCompleted+"")&&ve(m,c),w&192&&g!==(g=y[7](y[10].sumCompleted)+z+3)&&e(o,"x",g)},d(y){y&&(v(a),v(s),v(o))}}}function gt(t){let a,l,n,s,h,i,o,c,m,g=" ",y,w,_,L,N,j,fe,Z=we([0,1,2,3,4]),b=[];for(let u=0;u<5;u+=1)b[u]=at(tt(t,Z,u));let H=we(t[6]),T=[];for(let u=0;u<H.length;u+=1)T[u]=st(et(t,H,u));return{c(){a=C("div"),l=V("svg"),n=V("pattern"),s=V("rect"),h=V("line"),o=V("text"),c=U("Total "),m=U(t[1]),y=U(g),w=U(t[0]),_=U(" Suites"),L=V("line");for(let u=0;u<5;u+=1)b[u].c();j=qe();for(let u=0;u<T.length;u+=1)T[u].c();this.h()},l(u){a=S(u,"DIV",{id:!0,class:!0});var x=$(a);l=B(x,"svg",{height:!0,width:!0,id:!0});var d=$(l);n=B(d,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,class:!0});var E=$(n);s=B(E,"rect",{x:!0,y:!0,height:!0,width:!0,style:!0}),$(s).forEach(v),h=B(E,"line",{x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),$(h).forEach(v),E.forEach(v),o=B(d,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,class:!0});var I=$(o);c=R(I,"Total "),m=R(I,t[1]),y=R(I,g),w=R(I,t[0]),_=R(I," Suites"),I.forEach(v),L=B(d,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),$(L).forEach(v);for(let O=0;O<5;O+=1)b[O].l(d);j=qe();for(let O=0;O<T.length;O+=1)T[O].l(d);d.forEach(v),x.forEach(v),this.h()},h(){e(s,"x","0"),e(s,"y","0"),e(s,"height","10"),e(s,"width","10"),me(s,"fill",t[3]),e(h,"x1","0"),e(h,"y1","0"),e(h,"x2","10"),e(h,"y2","10"),me(h,"stroke","white"),me(h,"stroke-width","1"),me(h,"stroke-opacity","0.2"),e(n,"id",i="pattern-lines-"+t[0]),e(n,"x","0"),e(n,"y","0"),e(n,"width","10"),e(n,"height","10"),e(n,"patternUnits","userSpaceOnUse"),e(n,"class","svelte-gpuze4"),e(o,"x",5),e(o,"y",15),e(o,"id","title"),e(o,"text-anchor","start"),e(o,"class","svelte-gpuze4"),e(L,"x1",z),e(L,"x2",N=t[5]-Oe),e(L,"y1","40"),e(L,"y2","40"),e(L,"stroke","#002b8f"),e(L,"stroke-width","1"),e(l,"height",wt),e(l,"width",t[5]),e(l,"id","svgChart"),e(a,"id","barChart"),e(a,"class","svelte-gpuze4"),nt(()=>t[9].call(a))},m(u,x){G(u,a,x),r(a,l),r(l,n),r(n,s),r(n,h),r(l,o),r(o,c),r(o,m),r(o,y),r(o,w),r(o,_),r(l,L);for(let d=0;d<5;d+=1)b[d]&&b[d].m(l,null);r(l,j);for(let d=0;d<T.length;d+=1)T[d]&&T[d].m(l,null);fe=ot(a,t[9].bind(a))},p(u,[x]){if(x&8&&me(s,"fill",u[3]),x&1&&i!==(i="pattern-lines-"+u[0])&&e(n,"id",i),x&2&&ve(m,u[1]),x&1&&ve(w,u[0]),x&32&&N!==(N=u[5]-Oe)&&e(L,"x2",N),x&144){Z=we([0,1,2,3,4]);let d;for(d=0;d<5;d+=1){const E=tt(u,Z,d);b[d]?b[d].p(E,x):(b[d]=at(E),b[d].c(),b[d].m(l,j))}for(;d<5;d+=1)b[d].d(1)}if(x&193){H=we(u[6]);let d;for(d=0;d<H.length;d+=1){const E=et(u,H,d);T[d]?T[d].p(E,x):(T[d]=st(E),T[d].c(),T[d].m(l,null))}for(;d<T.length;d+=1)T[d].d(1);T.length=H.length}x&32&&e(l,"width",u[5])},i:Fe,o:Fe,d(u){u&&v(a),Qe(b,u),Qe(T,u),fe()}}}const wt=220,Oe=50,z=75;function xt(t,a,l){let n,s,h,{citySummaryData:i}=a,{type:o}=a,{date:c}=a,m,g;o==="Secondary"?g="#AB1368":o==="Detached"?g="#0D534D":g="grey";let y=100;function w(){m=this.offsetWidth,l(2,m)}return t.$$set=_=>{"citySummaryData"in _&&l(8,i=_.citySummaryData),"type"in _&&l(0,o=_.type),"date"in _&&l(1,c=_.date)},t.$$.update=()=>{t.$$.dirty&8&&console.log(g),t.$$.dirty&4&&l(5,n=m),t.$$.dirty&259&&l(6,s=Array.from(ft(i.filter(_=>_.Type===o),_=>_.City).entries(),([_,L])=>({city:_,sumCompleted:pt(L,N=>N[c])}))),t.$$.dirty&64&&console.log(s),t.$$.dirty&64&&l(4,y=Math.ceil(bt(s,_=>_.sumCompleted)/1e3)*1e3),t.$$.dirty&48&&l(7,h=_t().domain([0,y]).range([0,n-Oe-z]))},[o,c,m,g,y,n,s,h,i,w]}class xe extends rt{constructor(a){super(),it(this,a,xt,gt,lt,{citySummaryData:8,type:0,date:1})}}function Ct(t){let a,l,n,s,h,i,o,c='<div class="title"><h1><span class="italic">Gentle Density</span> Across Canada</h1> <h2>Tracking development of secondary and detached suites from local building permit data</h2> <h2></h2> <p>Author Names</p> <p>September 2024</p></div>',m,g,y="<p>â–¼</p>",w,_,L=`<p>Hello I am some introductory text about what this page is all aboooot.</p> <h3><span class="textSecondary">Secondary Suites</span></h3> <div class="typeWrapper svelte-1bbijsb"><div class="isometric-mobile svelte-1bbijsb"><img src="${Je}" alt="isometricSecondary"/></div> <div class="typeText svelte-1bbijsb"><p>Are self-contained living accommodation for an additional person or persons living together as a separate single housekeeping unit, in which both food preparation and sanitary facilities are provided for the exclusive use of the occupants of the suite, located in and subordinate to a dwelling unit.</p></div> <div class="isometric svelte-1bbijsb"><img src="${Je}" alt="isometricSecondary"/></div></div>`,N,j,fe=`<h3><span class="textLaneway">Detached Suites</span></h3> <div class="typeWrapper svelte-1bbijsb"><div class="isometric-mobile svelte-1bbijsb"><img src="${Ze}" alt="isometricLaneway"/></div> <div class="typeText svelte-1bbijsb"><p>Building a small detached dwelling unit that is located on the same property with an existing dwelling (e.g. a single family home). They are sometimes called Accessory Dwelling Units (ADUs), Garden Suites, Coach Houses, or Laneway Houses.</p></div> <div class="isometric svelte-1bbijsb"><img src="${Ze}" alt="isometricLaneway"/></div></div>`,Z,b,H,T="Hello I am some more text",u,x,d="OKAY 4 charts showing (buttons totals / per capita) of issued/completed and secondary/detached for a set time period - 2021, 2022 and 2023? I guess",E,I,O="Completed Permits",Ce,K,W,Se,_e,De,Y,ke,ye,Te,q,$e,Le,Me,F,He,ee,Ue="<h3>Issued Permits</h3> <p>2021 to 2023 (3 year total)</p>",Ee,Q,Ie,je,ze,X,Ae,te,Re=`<p>OKAY! small multiple by city trends of detached (lines for completed and issued)

		--

		OKAY! small multiple by city trends of secondary (lines for completed and issued) - highlight missing data, maybe line for when policy allowed?


		Dropdown select city and zoom to map
		- on map?
		- - toggles for completed and issued
		- - two colours for two types
		Note about policy?</p>`,Pe,ae,Ge="<p>Final text</p>",Ve,J,se,Ke='<h3>Data &amp; Code</h3> <p>List sources for the data here.</p> <p>All code used to analyze this data and make this website and its graphics are on <a href="https://github.com/schoolofcities/gentle-density">GitHub</a>. It was built with the help of Python (pandas, geopandas), Svelte, Maplibre, and D3.</p>',Be,le,ie,Ne,We;return s=new ht({}),q=new xe({props:{citySummaryData:t[1],type:"Secondary",date:"Completed"}}),F=new xe({props:{citySummaryData:t[1],type:"Detached",date:"Completed"}}),Q=new xe({props:{citySummaryData:t[1],type:"Secondary",date:"Issued"}}),X=new xe({props:{citySummaryData:t[1],type:"Detached",date:"Issued"}}),le=new mt({props:{currentPage:"canadian-cities"}}),{c(){a=C("meta"),l=C("link"),n=D(),ne(s.$$.fragment),h=D(),i=C("main"),o=C("div"),o.innerHTML=c,m=D(),g=C("div"),g.innerHTML=y,w=D(),_=C("div"),_.innerHTML=L,N=D(),j=C("div"),j.innerHTML=fe,Z=D(),b=C("div"),H=C("p"),H.textContent=T,u=D(),x=C("p"),x.textContent=d,E=D(),I=C("h3"),I.textContent=O,Ce=D(),K=C("div"),W=C("button"),Se=U("Totals"),De=D(),Y=C("button"),ke=U("Per Capita"),Te=D(),ne(q.$$.fragment),$e=D(),Le=C("br"),Me=D(),ne(F.$$.fragment),He=D(),ee=C("div"),ee.innerHTML=Ue,Ee=D(),ne(Q.$$.fragment),Ie=D(),je=C("br"),ze=D(),ne(X.$$.fragment),Ae=D(),te=C("div"),te.innerHTML=Re,Pe=D(),ae=C("div"),ae.innerHTML=Ge,Ve=D(),J=C("div"),se=C("div"),se.innerHTML=Ke,Be=D(),ne(le.$$.fragment),this.h()},l(f){const M=dt("svelte-1ajy3ol",document.head);a=S(M,"META",{name:!0,content:!0}),l=S(M,"LINK",{href:!0,rel:!0}),M.forEach(v),n=k(f),oe(s.$$.fragment,f),h=k(f),i=S(f,"MAIN",{});var p=$(i);o=S(p,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),P(o)!=="svelte-x48b5h"&&(o.innerHTML=c),m=k(p),g=S(p,"DIV",{class:!0,"data-svelte-h":!0}),P(g)!=="svelte-1kiphs8"&&(g.innerHTML=y),w=k(p),_=S(p,"DIV",{class:!0,"data-svelte-h":!0}),P(_)!=="svelte-5pr28y"&&(_.innerHTML=L),N=k(p),j=S(p,"DIV",{class:!0,"data-svelte-h":!0}),P(j)!=="svelte-1s1zffm"&&(j.innerHTML=fe),Z=k(p),b=S(p,"DIV",{class:!0});var A=$(b);H=S(A,"P",{"data-svelte-h":!0}),P(H)!=="svelte-17jfqmk"&&(H.textContent=T),u=k(A),x=S(A,"P",{"data-svelte-h":!0}),P(x)!=="svelte-1lasxjb"&&(x.textContent=d),E=k(A),I=S(A,"H3",{"data-svelte-h":!0}),P(I)!=="svelte-1sk3e3d"&&(I.textContent=O),Ce=k(A),K=S(A,"DIV",{class:!0});var re=$(K);W=S(re,"BUTTON",{class:!0});var pe=$(W);Se=R(pe,"Totals"),pe.forEach(v),De=k(re),Y=S(re,"BUTTON",{class:!0});var Ye=$(Y);ke=R(Ye,"Per Capita"),Ye.forEach(v),re.forEach(v),A.forEach(v),Te=k(p),oe(q.$$.fragment,p),$e=k(p),Le=S(p,"BR",{}),Me=k(p),oe(F.$$.fragment,p),He=k(p),ee=S(p,"DIV",{class:!0,"data-svelte-h":!0}),P(ee)!=="svelte-uixmyy"&&(ee.innerHTML=Ue),Ee=k(p),oe(Q.$$.fragment,p),Ie=k(p),je=S(p,"BR",{}),ze=k(p),oe(X.$$.fragment,p),Ae=k(p),te=S(p,"DIV",{class:!0,"data-svelte-h":!0}),P(te)!=="svelte-1ko061f"&&(te.innerHTML=Re),Pe=k(p),ae=S(p,"DIV",{class:!0,"data-svelte-h":!0}),P(ae)!=="svelte-1u49he8"&&(ae.innerHTML=Ge),Ve=k(p),J=S(p,"DIV",{class:!0});var be=$(J);se=S(be,"DIV",{class:!0,"data-svelte-h":!0}),P(se)!=="svelte-etanzd"&&(se.innerHTML=Ke),Be=k(be),oe(le.$$.fragment,be),be.forEach(v),p.forEach(v),this.h()},h(){e(a,"name","viewport"),e(a,"content","width=device-width, initial-scale=1, minimum-scale=1"),e(l,"href","https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css"),e(l,"rel","stylesheet"),document.title="Gentle Density in Canadian Cities | School of Cities",e(o,"class","blueprint"),me(o,"background-image","url('https://schoolofcities.github.io/gentle-density/blueprint-background.png')"),e(g,"class","arrow"),e(_,"class","text"),e(j,"class","text"),e(W,"class",_e=ge(t[0]==="Totals"?"buttonSelected":"buttonNotSelected")+" svelte-1bbijsb"),e(Y,"class",ye=ge(t[0]==="Per Capita"?"buttonSelected":"buttonNotSelected")+" svelte-1bbijsb"),e(K,"class","buttons-wrapper svelte-1bbijsb"),e(b,"class","text"),e(ee,"class","text"),e(te,"class","text"),e(ae,"class","text"),e(se,"class","text"),e(J,"class","background-white")},m(f,M){r(document.head,a),r(document.head,l),G(f,n,M),de(s,f,M),G(f,h,M),G(f,i,M),r(i,o),r(i,m),r(i,g),r(i,w),r(i,_),r(i,N),r(i,j),r(i,Z),r(i,b),r(b,H),r(b,u),r(b,x),r(b,E),r(b,I),r(b,Ce),r(b,K),r(K,W),r(W,Se),r(K,De),r(K,Y),r(Y,ke),r(i,Te),de(q,i,null),r(i,$e),r(i,Le),r(i,Me),de(F,i,null),r(i,He),r(i,ee),r(i,Ee),de(Q,i,null),r(i,Ie),r(i,je),r(i,ze),de(X,i,null),r(i,Ae),r(i,te),r(i,Pe),r(i,ae),r(i,Ve),r(i,J),r(J,se),r(J,Be),de(le,J,null),ie=!0,Ne||(We=[Xe(W,"click",t[3]),Xe(Y,"click",t[4])],Ne=!0)},p(f,[M]){(!ie||M&1&&_e!==(_e=ge(f[0]==="Totals"?"buttonSelected":"buttonNotSelected")+" svelte-1bbijsb"))&&e(W,"class",_e),(!ie||M&1&&ye!==(ye=ge(f[0]==="Per Capita"?"buttonSelected":"buttonNotSelected")+" svelte-1bbijsb"))&&e(Y,"class",ye);const p={};M&2&&(p.citySummaryData=f[1]),q.$set(p);const A={};M&2&&(A.citySummaryData=f[1]),F.$set(A);const re={};M&2&&(re.citySummaryData=f[1]),Q.$set(re);const pe={};M&2&&(pe.citySummaryData=f[1]),X.$set(pe)},i(f){ie||(ue(s.$$.fragment,f),ue(q.$$.fragment,f),ue(F.$$.fragment,f),ue(Q.$$.fragment,f),ue(X.$$.fragment,f),ue(le.$$.fragment,f),ie=!0)},o(f){ce(s.$$.fragment,f),ce(q.$$.fragment,f),ce(F.$$.fragment,f),ce(Q.$$.fragment,f),ce(X.$$.fragment,f),ce(le.$$.fragment,f),ie=!1},d(f){f&&(v(n),v(h),v(i)),v(a),v(l),he(s,f),he(q),he(F),he(Q),he(X),he(le),Ne=!1,ut(We)}}}function St(t,a,l){let n="Totals";function s(m){l(0,n=m)}let h=[];async function i(){try{const g=await(await fetch("canadian-cities-gentle-density-summary.csv")).text();l(1,h=vt(g))}catch(m){console.error("Error loading CSV data:",m)}}return ct(()=>{i()}),[n,h,s,()=>s("Totals"),()=>s("Per Capita")]}class It extends rt{constructor(a){super(),it(this,a,St,Ct,lt,{})}}export{It as component,Et as universal};
