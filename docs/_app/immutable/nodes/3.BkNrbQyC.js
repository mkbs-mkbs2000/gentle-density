import{s as rt,e as U,b as $,d as x,f as E,j as G,A as we,i as d,v as a,k as D,l as v,n as ve,S as de,p as ne,t as ie,h as le,P as B,Q as R,G as In,R as Bn,$ as st,T as Un,w as pe,m as Ue,U as Rn,r as Pn}from"../chunks/scheduler.-OitRhUq.js";import{S as ot,i as it,b as je,d as qe,m as Qe,t as Ze,a as Je,e as Xe}from"../chunks/index.B1cI3WIg.js";import{T as $n}from"../chunks/styles.tkbo2nM_.js";import{i as xn,e as q,g as Mt}from"../chunks/init.Csoud8Yr.js";import{s as kt}from"../chunks/sum.CB6J5KXz.js";import{t as Gn,c as En,a as At,f as jn,b as qn,d as Qn,e as Lt,g as Zn,l as Ct}from"../chunks/linear.BEmTfIAv.js";function Jn(e,t){let n=0,r=0;for(let o of e)o!=null&&(o=+o)>=o&&(++n,r+=o);if(n)return r/n}function Sn(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],i=e[r],l;return i<o&&(l=n,n=r,r=l,l=o,o=i,i=l),e[n]=t.floor(o),e[r]=t.ceil(i),e}function Ot(e){return Math.log(e)}function Ht(e){return Math.exp(e)}function Xn(e){return-Math.log(-e)}function Kn(e){return-Math.exp(-e)}function er(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tr(e){return e===10?er:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nr(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Yt(e){return(t,n)=>-e(-t,n)}function rr(e){const t=e(Ot,Ht),n=t.domain;let r=10,o,i;function l(){return o=nr(r),i=tr(r),n()[0]<0?(o=Yt(o),i=Yt(i),e(Xn,Kn)):e(Ot,Ht),t}return t.base=function(m){return arguments.length?(r=+m,l()):r},t.domain=function(m){return arguments.length?(n(m),l()):n()},t.ticks=m=>{const c=n();let u=c[0],h=c[c.length-1];const s=h<u;s&&([u,h]=[h,u]);let g=o(u),p=o(h),f,b;const C=m==null?10:+m;let L=[];if(!(r%1)&&p-g<C){if(g=Math.floor(g),p=Math.ceil(p),u>0){for(;g<=p;++g)for(f=1;f<r;++f)if(b=g<0?f/i(-g):f*i(g),!(b<u)){if(b>h)break;L.push(b)}}else for(;g<=p;++g)for(f=r-1;f>=1;--f)if(b=g>0?f/i(-g):f*i(g),!(b<u)){if(b>h)break;L.push(b)}L.length*2<C&&(L=At(u,h,C))}else L=At(g,p,Math.min(p-g,C)).map(i);return s?L.reverse():L},t.tickFormat=(m,c)=>{if(m==null&&(m=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=jn(c)).precision==null&&(c.trim=!0),c=qn(c)),m===1/0)return c;const u=Math.max(1,r*m/t.ticks().length);return h=>{let s=h/i(Math.round(o(h)));return s*r<r-.5&&(s*=r),s<=u?c(h):""}},t.nice=()=>n(Sn(n(),{floor:m=>i(Math.floor(o(m))),ceil:m=>i(Math.ceil(o(m)))})),t}function Fn(){const e=rr(Gn()).domain([1,10]);return e.copy=()=>En(e,Fn()).base(e.base()),xn.apply(e,arguments),e}const dt=new Date,_t=new Date;function ue(e,t,n,r){function o(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(e(i=new Date(+i)),i),o.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),o.round=i=>{const l=o(i),m=o.ceil(i);return i-l<m-i?l:m},o.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),o.range=(i,l,m)=>{const c=[];if(i=o.ceil(i),m=m==null?1:Math.floor(m),!(i<l)||!(m>0))return c;let u;do c.push(u=new Date(+i)),t(i,m),e(i);while(u<i&&i<l);return c},o.filter=i=>ue(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,m)=>{if(l>=l)if(m<0)for(;++m<=0;)for(;t(l,-1),!i(l););else for(;--m>=0;)for(;t(l,1),!i(l););}),n&&(o.count=(i,l)=>(dt.setTime(+i),_t.setTime(+l),e(dt),e(_t),Math.floor(n(dt,_t))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(r?l=>r(l)%i===0:l=>o.count(0,l)%i===0):o)),o}const ut=ue(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ut.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ue(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ut);ut.range;const ke=1e3,be=ke*60,De=be*60,xe=De*24,Dt=xe*7,Vt=xe*30,vt=xe*365,Be=ue(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ke)},(e,t)=>(t-e)/ke,e=>e.getUTCSeconds());Be.range;const Ut=ue(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ke)},(e,t)=>{e.setTime(+e+t*be)},(e,t)=>(t-e)/be,e=>e.getMinutes());Ut.range;const or=ue(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*be)},(e,t)=>(t-e)/be,e=>e.getUTCMinutes());or.range;const xt=ue(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ke-e.getMinutes()*be)},(e,t)=>{e.setTime(+e+t*De)},(e,t)=>(t-e)/De,e=>e.getHours());xt.range;const ir=ue(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*De)},(e,t)=>(t-e)/De,e=>e.getUTCHours());ir.range;const lt=ue(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*be)/xe,e=>e.getDate()-1);lt.range;const Et=ue(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xe,e=>e.getUTCDate()-1);Et.range;const lr=ue(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xe,e=>Math.floor(e/xe));lr.range;function ze(e){return ue(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*be)/Dt)}const ht=ze(0),ct=ze(1),ar=ze(2),sr=ze(3),Re=ze(4),ur=ze(5),cr=ze(6);ht.range;ct.range;ar.range;sr.range;Re.range;ur.range;cr.range;function We(e){return ue(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Dt)}const An=We(0),ft=We(1),fr=We(2),hr=We(3),Pe=We(4),mr=We(5),gr=We(6);An.range;ft.range;fr.range;hr.range;Pe.range;mr.range;gr.range;const St=ue(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());St.range;const dr=ue(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());dr.range;const Ee=ue(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ee.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ue(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ee.range;const Ve=ue(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ve.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ue(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ve.range;function _r(e,t,n,r,o,i){const l=[[Be,1,ke],[Be,5,5*ke],[Be,15,15*ke],[Be,30,30*ke],[i,1,be],[i,5,5*be],[i,15,15*be],[i,30,30*be],[o,1,De],[o,3,3*De],[o,6,6*De],[o,12,12*De],[r,1,xe],[r,2,2*xe],[n,1,Dt],[t,1,Vt],[t,3,3*Vt],[e,1,vt]];function m(u,h,s){const g=h<u;g&&([u,h]=[h,u]);const p=s&&typeof s.range=="function"?s:c(u,h,s),f=p?p.range(u,+h+1):[];return g?f.reverse():f}function c(u,h,s){const g=Math.abs(h-u)/s,p=Qn(([,,C])=>C).right(l,g);if(p===l.length)return e.every(Lt(u/vt,h/vt,s));if(p===0)return ut.every(Math.max(Lt(u,h,s),1));const[f,b]=l[g/l[p-1][2]<l[p][2]/g?p-1:p];return f.every(b)}return[m,c]}const[vr,pr]=_r(Ee,St,ht,lt,xt,Ut);function pt(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ke(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function yr(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,i=e.days,l=e.shortDays,m=e.months,c=e.shortMonths,u=et(o),h=tt(o),s=et(i),g=tt(i),p=et(l),f=tt(l),b=et(m),C=tt(m),L=et(c),I=tt(c),O={a:ye,A:Q,b:Te,B:X,c:null,d:Rt,e:Rt,f:Br,g:Xr,G:eo,H:Wr,I:Nr,j:Ir,L:Ln,m:Rr,M:Pr,p:ge,q:te,Q:Gt,s:jt,S:$r,u:Gr,U:jr,V:qr,w:Qr,W:Zr,x:null,X:null,y:Jr,Y:Kr,Z:to,"%":$t},z={a:y,A:H,b:w,B:Z,c:null,d:Pt,e:Pt,f:io,g:_o,G:po,H:no,I:ro,j:oo,L:Hn,m:lo,M:ao,p:Fe,q:Ae,Q:Gt,s:jt,S:so,u:uo,U:co,V:fo,w:ho,W:mo,x:null,X:null,y:go,Y:vo,Z:yo,"%":$t},S={a:he,A:W,b:K,B:Me,c:Se,d:It,e:It,f:Hr,g:Nt,G:Wt,H:Bt,I:Bt,j:Fr,L:Or,m:Sr,M:Ar,p:ae,q:Er,Q:Vr,s:zr,S:Lr,u:Mr,U:kr,V:Dr,w:Cr,W:Ur,x:me,X:ee,y:Nt,Y:Wt,Z:xr,"%":Yr};O.x=M(n,O),O.X=M(r,O),O.c=M(t,O),z.x=M(n,z),z.X=M(r,z),z.c=M(t,z);function M(T,F){return function(A){var _=[],re=-1,Y=0,oe=T.length,V,Ce,Ne;for(A instanceof Date||(A=new Date(+A));++re<oe;)T.charCodeAt(re)===37&&(_.push(T.slice(Y,re)),(Ce=zt[V=T.charAt(++re)])!=null?V=T.charAt(++re):Ce=V==="e"?" ":"0",(Ne=F[V])&&(V=Ne(A,Ce)),_.push(V),Y=re+1);return _.push(T.slice(Y,re)),_.join("")}}function k(T,F){return function(A){var _=Ke(1900,void 0,1),re=P(_,T,A+="",0),Y,oe;if(re!=A.length)return null;if("Q"in _)return new Date(_.Q);if("s"in _)return new Date(_.s*1e3+("L"in _?_.L:0));if(F&&!("Z"in _)&&(_.Z=0),"p"in _&&(_.H=_.H%12+_.p*12),_.m===void 0&&(_.m="q"in _?_.q:0),"V"in _){if(_.V<1||_.V>53)return null;"w"in _||(_.w=1),"Z"in _?(Y=yt(Ke(_.y,0,1)),oe=Y.getUTCDay(),Y=oe>4||oe===0?ft.ceil(Y):ft(Y),Y=Et.offset(Y,(_.V-1)*7),_.y=Y.getUTCFullYear(),_.m=Y.getUTCMonth(),_.d=Y.getUTCDate()+(_.w+6)%7):(Y=pt(Ke(_.y,0,1)),oe=Y.getDay(),Y=oe>4||oe===0?ct.ceil(Y):ct(Y),Y=lt.offset(Y,(_.V-1)*7),_.y=Y.getFullYear(),_.m=Y.getMonth(),_.d=Y.getDate()+(_.w+6)%7)}else("W"in _||"U"in _)&&("w"in _||(_.w="u"in _?_.u%7:"W"in _?1:0),oe="Z"in _?yt(Ke(_.y,0,1)).getUTCDay():pt(Ke(_.y,0,1)).getDay(),_.m=0,_.d="W"in _?(_.w+6)%7+_.W*7-(oe+5)%7:_.w+_.U*7-(oe+6)%7);return"Z"in _?(_.H+=_.Z/100|0,_.M+=_.Z%100,yt(_)):pt(_)}}function P(T,F,A,_){for(var re=0,Y=F.length,oe=A.length,V,Ce;re<Y;){if(_>=oe)return-1;if(V=F.charCodeAt(re++),V===37){if(V=F.charAt(re++),Ce=S[V in zt?F.charAt(re++):V],!Ce||(_=Ce(T,A,_))<0)return-1}else if(V!=A.charCodeAt(_++))return-1}return _}function ae(T,F,A){var _=u.exec(F.slice(A));return _?(T.p=h.get(_[0].toLowerCase()),A+_[0].length):-1}function he(T,F,A){var _=p.exec(F.slice(A));return _?(T.w=f.get(_[0].toLowerCase()),A+_[0].length):-1}function W(T,F,A){var _=s.exec(F.slice(A));return _?(T.w=g.get(_[0].toLowerCase()),A+_[0].length):-1}function K(T,F,A){var _=L.exec(F.slice(A));return _?(T.m=I.get(_[0].toLowerCase()),A+_[0].length):-1}function Me(T,F,A){var _=b.exec(F.slice(A));return _?(T.m=C.get(_[0].toLowerCase()),A+_[0].length):-1}function Se(T,F,A){return P(T,t,F,A)}function me(T,F,A){return P(T,n,F,A)}function ee(T,F,A){return P(T,r,F,A)}function ye(T){return l[T.getDay()]}function Q(T){return i[T.getDay()]}function Te(T){return c[T.getMonth()]}function X(T){return m[T.getMonth()]}function ge(T){return o[+(T.getHours()>=12)]}function te(T){return 1+~~(T.getMonth()/3)}function y(T){return l[T.getUTCDay()]}function H(T){return i[T.getUTCDay()]}function w(T){return c[T.getUTCMonth()]}function Z(T){return m[T.getUTCMonth()]}function Fe(T){return o[+(T.getUTCHours()>=12)]}function Ae(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var F=M(T+="",O);return F.toString=function(){return T},F},parse:function(T){var F=k(T+="",!1);return F.toString=function(){return T},F},utcFormat:function(T){var F=M(T+="",z);return F.toString=function(){return T},F},utcParse:function(T){var F=k(T+="",!0);return F.toString=function(){return T},F}}}var zt={"-":"",_:" ",0:"0"},ce=/^\s*\d+/,wr=/^%/,br=/[\\^$*+?|[\]().{}]/g;function N(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(t)+o:o)}function Tr(e){return e.replace(br,"\\$&")}function et(e){return new RegExp("^(?:"+e.map(Tr).join("|")+")","i")}function tt(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Cr(e,t,n){var r=ce.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Mr(e,t,n){var r=ce.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function kr(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Dr(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ur(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Wt(e,t,n){var r=ce.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Nt(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function xr(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Er(e,t,n){var r=ce.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Sr(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function It(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Fr(e,t,n){var r=ce.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Bt(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ar(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Lr(e,t,n){var r=ce.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Or(e,t,n){var r=ce.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Hr(e,t,n){var r=ce.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Yr(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Vr(e,t,n){var r=ce.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function zr(e,t,n){var r=ce.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Rt(e,t){return N(e.getDate(),t,2)}function Wr(e,t){return N(e.getHours(),t,2)}function Nr(e,t){return N(e.getHours()%12||12,t,2)}function Ir(e,t){return N(1+lt.count(Ee(e),e),t,3)}function Ln(e,t){return N(e.getMilliseconds(),t,3)}function Br(e,t){return Ln(e,t)+"000"}function Rr(e,t){return N(e.getMonth()+1,t,2)}function Pr(e,t){return N(e.getMinutes(),t,2)}function $r(e,t){return N(e.getSeconds(),t,2)}function Gr(e){var t=e.getDay();return t===0?7:t}function jr(e,t){return N(ht.count(Ee(e)-1,e),t,2)}function On(e){var t=e.getDay();return t>=4||t===0?Re(e):Re.ceil(e)}function qr(e,t){return e=On(e),N(Re.count(Ee(e),e)+(Ee(e).getDay()===4),t,2)}function Qr(e){return e.getDay()}function Zr(e,t){return N(ct.count(Ee(e)-1,e),t,2)}function Jr(e,t){return N(e.getFullYear()%100,t,2)}function Xr(e,t){return e=On(e),N(e.getFullYear()%100,t,2)}function Kr(e,t){return N(e.getFullYear()%1e4,t,4)}function eo(e,t){var n=e.getDay();return e=n>=4||n===0?Re(e):Re.ceil(e),N(e.getFullYear()%1e4,t,4)}function to(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+N(t/60|0,"0",2)+N(t%60,"0",2)}function Pt(e,t){return N(e.getUTCDate(),t,2)}function no(e,t){return N(e.getUTCHours(),t,2)}function ro(e,t){return N(e.getUTCHours()%12||12,t,2)}function oo(e,t){return N(1+Et.count(Ve(e),e),t,3)}function Hn(e,t){return N(e.getUTCMilliseconds(),t,3)}function io(e,t){return Hn(e,t)+"000"}function lo(e,t){return N(e.getUTCMonth()+1,t,2)}function ao(e,t){return N(e.getUTCMinutes(),t,2)}function so(e,t){return N(e.getUTCSeconds(),t,2)}function uo(e){var t=e.getUTCDay();return t===0?7:t}function co(e,t){return N(An.count(Ve(e)-1,e),t,2)}function Yn(e){var t=e.getUTCDay();return t>=4||t===0?Pe(e):Pe.ceil(e)}function fo(e,t){return e=Yn(e),N(Pe.count(Ve(e),e)+(Ve(e).getUTCDay()===4),t,2)}function ho(e){return e.getUTCDay()}function mo(e,t){return N(ft.count(Ve(e)-1,e),t,2)}function go(e,t){return N(e.getUTCFullYear()%100,t,2)}function _o(e,t){return e=Yn(e),N(e.getUTCFullYear()%100,t,2)}function vo(e,t){return N(e.getUTCFullYear()%1e4,t,4)}function po(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pe(e):Pe.ceil(e),N(e.getUTCFullYear()%1e4,t,4)}function yo(){return"+0000"}function $t(){return"%"}function Gt(e){return+e}function jt(e){return Math.floor(+e/1e3)}var Ie,Vn,zn;wo({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wo(e){return Ie=yr(e),Vn=Ie.format,zn=Ie.parse,Ie.utcFormat,Ie.utcParse,Ie}function bo(e){return new Date(e)}function To(e){return e instanceof Date?+e:+new Date(+e)}function Wn(e,t,n,r,o,i,l,m,c,u){var h=Zn(),s=h.invert,g=h.domain,p=u(".%L"),f=u(":%S"),b=u("%I:%M"),C=u("%I %p"),L=u("%a %d"),I=u("%b %d"),O=u("%B"),z=u("%Y");function S(M){return(c(M)<M?p:m(M)<M?f:l(M)<M?b:i(M)<M?C:r(M)<M?o(M)<M?L:I:n(M)<M?O:z)(M)}return h.invert=function(M){return new Date(s(M))},h.domain=function(M){return arguments.length?g(Array.from(M,To)):g().map(bo)},h.ticks=function(M){var k=g();return e(k[0],k[k.length-1],M??10)},h.tickFormat=function(M,k){return k==null?S:u(k)},h.nice=function(M){var k=g();return(!M||typeof M.range!="function")&&(M=t(k[0],k[k.length-1],M??10)),M?g(Sn(k,M)):h},h.copy=function(){return En(h,Wn(e,t,n,r,o,i,l,m,c,u))},h}function Co(){return xn.apply(Wn(vr,pr,Ee,St,ht,lt,xt,Ut,Be,Vn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const Mo=!0,ai=Object.freeze(Object.defineProperty({__proto__:null,prerender:Mo},Symbol.toStringTag,{value:"Module"}));function qt(e,t,n){const r=e.slice();return r[2]=t[n],r}function Qt(e){let t,n,r=e[2].title+"",o;return{c(){t=U("p"),n=U("a"),o=ie(r),this.h()},l(i){t=x(i,"P",{class:!0});var l=E(t);n=x(l,"A",{href:!0,class:!0});var m=E(n);o=le(m,r),m.forEach(d),l.forEach(d),this.h()},h(){a(n,"href","./"+e[2].name),a(n,"class","svelte-1vu1nrq"),a(t,"class","svelte-1vu1nrq")},m(i,l){D(i,t,l),v(t,n),v(n,o)},p:ve,d(i){i&&d(t)}}}function Zt(e){let t,n=e[0]!==e[2].name&&Qt(e);return{c(){n&&n.c(),t=ne()},l(r){n&&n.l(r),t=ne()},m(r,o){n&&n.m(r,o),D(r,t,o)},p(r,o){r[0]!==r[2].name?n?n.p(r,o):(n=Qt(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&d(t),n&&n.d(r)}}}function ko(e){let t,n,r,o,i,l="Read More",m,c,u,h=q(e[1]),s=[];for(let g=0;g<h.length;g+=1)s[g]=Zt(qt(e,h,g));return{c(){t=U("div"),n=U("div"),r=U("br"),o=$(),i=U("h3"),i.textContent=l,m=$();for(let g=0;g<s.length;g+=1)s[g].c();c=$(),u=U("br"),this.h()},l(g){t=x(g,"DIV",{class:!0});var p=E(t);n=x(p,"DIV",{class:!0});var f=E(n);r=x(f,"BR",{}),o=G(f),i=x(f,"H3",{class:!0,"data-svelte-h":!0}),we(i)!=="svelte-t3d6jt"&&(i.textContent=l),m=G(f);for(let b=0;b<s.length;b+=1)s[b].l(f);c=G(f),u=x(f,"BR",{}),f.forEach(d),p.forEach(d),this.h()},h(){a(i,"class","svelte-1vu1nrq"),a(n,"class","text"),a(t,"class","read-more svelte-1vu1nrq")},m(g,p){D(g,t,p),v(t,n),v(n,r),v(n,o),v(n,i),v(n,m);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(n,null);v(n,c),v(n,u)},p(g,[p]){if(p&3){h=q(g[1]);let f;for(f=0;f<h.length;f+=1){const b=qt(g,h,f);s[f]?s[f].p(b,p):(s[f]=Zt(b),s[f].c(),s[f].m(n,c))}for(;f<s.length;f+=1)s[f].d(1);s.length=h.length}},i:ve,o:ve,d(g){g&&d(t),de(s,g)}}}function Do(e,t,n){let{currentPage:r}=t,o=[{name:"canadian-residential-conversions",title:"Tracking Residential Dwelling Conversions: An Exploration of Canadian Building Permit Survey Data",date:"07/2024"},{name:"toronto-rooming-houses",title:"Zoning for Multi-Tenant Housing in Toronto",date:"05/2024"},{name:"toronto-renoductions",title:"Reno-ductions: Loss of Gentle Density in Toronto",date:"01/2024"},{name:"toronto-building-permits",title:"Tracking Gentle Density in Toronto: Visualizing Building Permit Data From 2013 To 2023",date:"01/2024"}];return e.$$set=i=>{"currentPage"in i&&n(0,r=i.currentPage)},[r,o]}class Uo extends ot{constructor(t){super(),it(this,t,Do,ko,rt,{currentPage:0})}}function Jt(e,t,n){const r=e.slice();return r[19]=t[n],r[21]=n,r}function Xt(e,t,n){const r=e.slice();return r[22]=t[n],r}function Kt(e,t,n){const r=e.slice();return r[25]=t[n],r}function en(e,t,n){const r=e.slice();return r[25]=t[n],r}function tn(e){let t,n=e[25]+"",r,o,i,l,m;function c(){return e[15](e[25])}return{c(){t=U("div"),r=ie(n),o=$(),this.h()},l(u){t=x(u,"DIV",{class:!0});var h=E(t);r=le(h,n),o=G(h),h.forEach(d),this.h()},h(){a(t,"class",i=st(e[25]===e[0]?"option-selected":"option-not-selected")+" svelte-19rgk4g")},m(u,h){D(u,t,h),v(t,r),v(t,o),l||(m=Un(t,"click",c),l=!0)},p(u,h){e=u,h&1&&i!==(i=st(e[25]===e[0]?"option-selected":"option-not-selected")+" svelte-19rgk4g")&&a(t,"class",i)},d(u){u&&d(t),l=!1,m()}}}function nn(e){let t,n=e[25]+"",r,o,i,l,m;function c(){return e[16](e[25])}return{c(){t=U("div"),r=ie(n),o=$(),this.h()},l(u){t=x(u,"DIV",{class:!0});var h=E(t);r=le(h,n),o=G(h),h.forEach(d),this.h()},h(){a(t,"class",i=st(e[25]===e[2]?"option-selected":"option-not-selected")+" svelte-19rgk4g")},m(u,h){D(u,t,h),v(t,r),v(t,o),l||(m=Un(t,"click",c),l=!0)},p(u,h){e=u,h&4&&i!==(i=st(e[25]===e[2]?"option-selected":"option-not-selected")+" svelte-19rgk4g")&&a(t,"class",i)},d(u){u&&d(t),l=!1,m()}}}function rn(e){let t,n,r,o,i=ln(e[22])+"",l,m;return{c(){t=B("line"),o=B("text"),l=ie(i),this.h()},l(c){t=R(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),E(t).forEach(d),o=R(c,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var u=E(o);l=le(u,i),u.forEach(d),this.h()},h(){a(t,"x1",n=e[4](e[22])),a(t,"y1","25"),a(t,"x2",r=e[4](e[22])),a(t,"y2",e[10]),pe(t,"stroke","#8EB6DC"),pe(t,"stroke-width","1"),pe(t,"opacity","0.5"),a(o,"x",m=e[4](e[22])),a(o,"y","20"),a(o,"id","labelBar"),a(o,"text-anchor","middle"),a(o,"font-size","16"),a(o,"class","svelte-19rgk4g")},m(c,u){D(c,t,u),D(c,o,u),v(o,l)},p(c,u){u&24&&n!==(n=c[4](c[22]))&&a(t,"x1",n),u&24&&r!==(r=c[4](c[22]))&&a(t,"x2",r),u&8&&i!==(i=ln(c[22])+"")&&Ue(l,i),u&24&&m!==(m=c[4](c[22]))&&a(o,"x",m)},d(c){c&&(d(t),d(o))}}}function on(e){let t,n=e[19].GEO.split(",")[0]+"",r,o,i=e[19].conv+"",l,m,c=Math.round(100*e[19].per)+"",u,h,s,g,p;return{c(){t=B("text"),r=ie(n),o=ie(": "),l=ie(i),m=ie(" ("),u=ie(c),h=ie("%)"),s=B("rect"),this.h()},l(f){t=R(f,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var b=E(t);r=le(b,n),o=le(b,": "),l=le(b,i),m=le(b," ("),u=le(b,c),h=le(b,"%)"),b.forEach(d),s=R(f,"rect",{id:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),E(s).forEach(d),this.h()},h(){a(t,"x","0"),a(t,"y",e[21]*32+43),a(t,"id","labelBar"),a(t,"text-anchor","start"),a(t,"font-size","16"),a(t,"class","svelte-19rgk4g"),a(s,"id","bar"),a(s,"x",0),a(s,"y",e[21]*32+47),a(s,"height",8),a(s,"width",g=e[4](e[19].conv)),a(s,"fill",p=e[19].colour)},m(f,b){D(f,t,b),v(t,r),v(t,o),v(t,l),v(t,m),v(t,u),v(t,h),D(f,s,b)},p(f,b){b&32&&n!==(n=f[19].GEO.split(",")[0]+"")&&Ue(r,n),b&32&&i!==(i=f[19].conv+"")&&Ue(l,i),b&32&&c!==(c=Math.round(100*f[19].per)+"")&&Ue(u,c),b&48&&g!==(g=f[4](f[19].conv))&&a(s,"width",g),b&32&&p!==(p=f[19].colour)&&a(s,"fill",p)},d(f){f&&(d(t),d(s))}}}function xo(e){let t,n="Total and percent of new dwellings from building conversions",r,o,i,l,m,c,u,h,s,g,p,f,b,C,L,I,O,z,S,M,k,P,ae,he,W,K,Me,Se,me=q(e[6]),ee=[];for(let y=0;y<me.length;y+=1)ee[y]=tn(en(e,me,y));let ye=q(e[8]),Q=[];for(let y=0;y<ye.length;y+=1)Q[y]=nn(Kt(e,ye,y));let Te=q(e[3]),X=[];for(let y=0;y<Te.length;y+=1)X[y]=rn(Xt(e,Te,y));let ge=q(e[5]),te=[];for(let y=0;y<ge.length;y+=1)te[y]=on(Jt(e,ge,y));return{c(){t=U("h3"),t.textContent=n,r=$(),o=B("svg"),i=B("text"),l=ie("01/2019 to 12/2023 (5 years total)"),m=$(),c=B("svg"),u=B("text"),h=ie("% of all new units from conversions"),s=B("rect"),g=B("rect"),p=B("rect"),f=B("text"),b=ie("5%"),C=B("text"),L=ie("10%"),I=$(),O=B("svg"),z=B("text"),S=ie("# of new units just from conversions"),M=$(),k=U("div");for(let y=0;y<ee.length;y+=1)ee[y].c();P=$(),ae=U("div");for(let y=0;y<Q.length;y+=1)Q[y].c();he=$(),W=U("div"),K=B("svg");for(let y=0;y<X.length;y+=1)X[y].c();Me=ne();for(let y=0;y<te.length;y+=1)te[y].c();this.h()},l(y){t=x(y,"H3",{"data-svelte-h":!0}),we(t)!=="svelte-n00m8l"&&(t.textContent=n),r=G(y),o=R(y,"svg",{id:!0,height:!0,width:!0,class:!0});var H=E(o);i=R(H,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var w=E(i);l=le(w,"01/2019 to 12/2023 (5 years total)"),w.forEach(d),H.forEach(d),m=G(y),c=R(y,"svg",{id:!0,height:!0,width:!0,class:!0});var Z=E(c);u=R(Z,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var Fe=E(u);h=le(Fe,"% of all new units from conversions"),Fe.forEach(d),s=R(Z,"rect",{id:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),E(s).forEach(d),g=R(Z,"rect",{id:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),E(g).forEach(d),p=R(Z,"rect",{id:!0,x:!0,y:!0,height:!0,width:!0,fill:!0}),E(p).forEach(d),f=R(Z,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var Ae=E(f);b=le(Ae,"5%"),Ae.forEach(d),C=R(Z,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var T=E(C);L=le(T,"10%"),T.forEach(d),Z.forEach(d),I=G(y),O=R(y,"svg",{id:!0,height:!0,width:!0,class:!0});var F=E(O);z=R(F,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var A=E(z);S=le(A,"# of new units just from conversions"),A.forEach(d),F.forEach(d),M=G(y),k=x(y,"DIV",{class:!0});var _=E(k);for(let V=0;V<ee.length;V+=1)ee[V].l(_);_.forEach(d),P=G(y),ae=x(y,"DIV",{class:!0});var re=E(ae);for(let V=0;V<Q.length;V+=1)Q[V].l(re);re.forEach(d),he=G(y),W=x(y,"DIV",{class:!0});var Y=E(W);K=R(Y,"svg",{height:!0,width:!0,id:!0});var oe=E(K);for(let V=0;V<X.length;V+=1)X[V].l(oe);Me=ne();for(let V=0;V<te.length;V+=1)te[V].l(oe);oe.forEach(d),Y.forEach(d),this.h()},h(){a(i,"x","0"),a(i,"y","12"),a(i,"id","labelBar"),a(i,"text-anchor","start"),a(i,"font-size","16"),a(i,"class","svelte-19rgk4g"),a(o,"id","years"),a(o,"height","35"),a(o,"width",e[1]),a(o,"class","svelte-19rgk4g"),a(u,"x","0"),a(u,"y","12"),a(u,"id","labelBar"),a(u,"text-anchor","start"),a(u,"font-size","16"),a(u,"class","svelte-19rgk4g"),a(s,"id","legendBar"),a(s,"x",0),a(s,"y",22),a(s,"height",8),a(s,"width",99),a(s,"fill","#F1C500"),a(g,"id","legendBar"),a(g,"x",101),a(g,"y",22),a(g,"height",8),a(g,"width",99),a(g,"fill","#ce6c35"),a(p,"id","legendBar"),a(p,"x",202),a(p,"y",22),a(p,"height",8),a(p,"width",99),a(p,"fill","#ab1269"),a(f,"x","100"),a(f,"y","44"),a(f,"id","labelBar"),a(f,"text-anchor","middle"),a(f,"font-size","16"),a(f,"class","svelte-19rgk4g"),a(C,"x","200"),a(C,"y","44"),a(C,"id","labelBar"),a(C,"text-anchor","middle"),a(C,"font-size","16"),a(C,"class","svelte-19rgk4g"),a(c,"id","legend"),a(c,"height","50"),a(c,"width",e[1]),a(c,"class","svelte-19rgk4g"),a(z,"x","0"),a(z,"y","12"),a(z,"id","labelBar"),a(z,"text-anchor","start"),a(z,"font-size","16"),a(z,"class","svelte-19rgk4g"),a(O,"id","legend"),a(O,"height","15"),a(O,"width",e[1]),a(O,"class","svelte-19rgk4g"),a(k,"class","options-container svelte-19rgk4g"),a(ae,"class","options-container svelte-19rgk4g"),a(K,"height",e[10]),a(K,"width",e[1]),a(K,"id","svgChart"),a(W,"class","chart-wrapper"),In(()=>e[17].call(W))},m(y,H){D(y,t,H),D(y,r,H),D(y,o,H),v(o,i),v(i,l),D(y,m,H),D(y,c,H),v(c,u),v(u,h),v(c,s),v(c,g),v(c,p),v(c,f),v(f,b),v(c,C),v(C,L),D(y,I,H),D(y,O,H),v(O,z),v(z,S),D(y,M,H),D(y,k,H);for(let w=0;w<ee.length;w+=1)ee[w]&&ee[w].m(k,null);D(y,P,H),D(y,ae,H);for(let w=0;w<Q.length;w+=1)Q[w]&&Q[w].m(ae,null);D(y,he,H),D(y,W,H),v(W,K);for(let w=0;w<X.length;w+=1)X[w]&&X[w].m(K,null);v(K,Me);for(let w=0;w<te.length;w+=1)te[w]&&te[w].m(K,null);Se=Bn(W,e[17].bind(W))},p(y,[H]){if(H&2&&a(o,"width",y[1]),H&2&&a(c,"width",y[1]),H&2&&a(O,"width",y[1]),H&193){me=q(y[6]);let w;for(w=0;w<me.length;w+=1){const Z=en(y,me,w);ee[w]?ee[w].p(Z,H):(ee[w]=tn(Z),ee[w].c(),ee[w].m(k,null))}for(;w<ee.length;w+=1)ee[w].d(1);ee.length=me.length}if(H&772){ye=q(y[8]);let w;for(w=0;w<ye.length;w+=1){const Z=Kt(y,ye,w);Q[w]?Q[w].p(Z,H):(Q[w]=nn(Z),Q[w].c(),Q[w].m(ae,null))}for(;w<Q.length;w+=1)Q[w].d(1);Q.length=ye.length}if(H&1048){Te=q(y[3]);let w;for(w=0;w<Te.length;w+=1){const Z=Xt(y,Te,w);X[w]?X[w].p(Z,H):(X[w]=rn(Z),X[w].c(),X[w].m(K,Me))}for(;w<X.length;w+=1)X[w].d(1);X.length=Te.length}if(H&48){ge=q(y[5]);let w;for(w=0;w<ge.length;w+=1){const Z=Jt(y,ge,w);te[w]?te[w].p(Z,H):(te[w]=on(Z),te[w].c(),te[w].m(K,null))}for(;w<te.length;w+=1)te[w].d(1);te.length=ge.length}H&2&&a(K,"width",y[1])},i:ve,o:ve,d(y){y&&(d(t),d(r),d(o),d(m),d(c),d(I),d(O),d(M),d(k),d(P),d(ae),d(he),d(W)),de(ee,y),de(Q,y),de(X,y),de(te,y),Se()}}}function ln(e){return e>999?e%1e3===0?(e/1e3).toFixed(0)+"k":(e/1e3).toFixed(1)+"k":e}function Eo(e,t,n){let r,o,i,{data:l}=t,{cities:m}=t,c="Log Scale",u=["Linear Scale","Log Scale"];function h(S){n(0,c=S)}let s="Sort by #",g=["Sort by #","Sort by %"];function p(S){n(2,s=S),S==="Sort by #"?n(5,i=i.sort((M,k)=>k.conv-M.conv||k.per-M.per)):n(5,i=i.sort((M,k)=>k.per-M.per||k.conv-M.conv)),console.log(i)}let f,b=300+40*25,C,L;const I=S=>h(S),O=S=>p(S);function z(){f=this.offsetWidth,n(1,f)}return e.$$set=S=>{"data"in S&&n(11,l=S.data),"cities"in S&&n(12,m=S.cities)},e.$$.update=()=>{e.$$.dirty&2048&&n(14,r=Mt(l,S=>S.GEO,S=>S.Type)),e.$$.dirty&16384&&n(13,o=Array.from(r,([S,M])=>({GEO:S,sums:Array.from(M,([k,P])=>({Type:k,sumValue:kt(P,ae=>ae.VALUE)}))}))),e.$$.dirty&12288&&n(13,o=o.filter(S=>m.slice(1).includes(S.GEO))),e.$$.dirty&8192&&n(5,i=o.map(S=>{const M=S.sums.filter(he=>he.Type!=="new").reduce((he,W)=>he+W.sumValue,0),k=S.sums.reduce((he,W)=>he+W.sumValue,0),P=k!==0?M/k:0;let ae;return P<.05?ae="#F1C500":P<.1?ae="#ce6c35":ae="#ab1269",{GEO:S.GEO,conv:M,per:P,colour:ae}}).sort((S,M)=>M.conv-S.conv)),e.$$.dirty&3&&(c==="Log Scale"?(n(4,L=Fn().domain([100,65e3]).range([0,f])),n(3,C=[500,1e3,5e3,1e4,5e4])):(n(4,L=Ct().domain([1,42e3]).range([0,f])),n(3,C=[1e4,2e4,3e4,4e4])))},[c,f,s,C,L,i,u,h,g,p,b,l,m,o,r,I,O,z]}class So extends ot{constructor(t){super(),it(this,t,Eo,xo,rt,{data:11,cities:12})}}function an(e,t,n){const r=e.slice();return r[7]=t[n],r}function Fo(e,t,n){const r=e.slice();return r[10]=t[n],r[12]=n,r}function Ao(e,t,n){const r=e.slice();return r[13]=t[n],r}function sn(e,t,n){const r=e.slice();return r[16]=t[n],r}function un(e,t,n){const r=e.slice();return r[10]=t[n],r}function cn(e,t,n){const r=e.slice();return r[21]=t[n],r}function fn(e){let t=(e[4]=Ct().domain([0,e[16].mean*2.25]).range([115,25]))+"",n,r,o,i=q(e[16].sums),l=[];for(let u=0;u<i.length;u+=1)l[u]=hn(cn(e,i,u));let m=q(["2019","2020","2021","2022","2023"]),c=[];for(let u=0;u<5;u+=1)c[u]=mn(un(e,m,u));return{c(){n=ie(t);for(let u=0;u<l.length;u+=1)l[u].c();r=ne();for(let u=0;u<5;u+=1)c[u].c();o=ne()},l(u){n=le(u,t);for(let h=0;h<l.length;h+=1)l[h].l(u);r=ne();for(let h=0;h<5;h+=1)c[h].l(u);o=ne()},m(u,h){D(u,n,h);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(u,h);D(u,r,h);for(let s=0;s<5;s+=1)c[s]&&c[s].m(u,h);D(u,o,h)},p(u,h){if(h&2&&t!==(t=(u[4]=Ct().domain([0,u[16].mean*2.25]).range([115,25]))+"")&&Ue(n,t),h&22){i=q(u[16].sums);let s;for(s=0;s<i.length;s+=1){const g=cn(u,i,s);l[s]?l[s].p(g,h):(l[s]=hn(g),l[s].c(),l[s].m(r.parentNode,r))}for(;s<l.length;s+=1)l[s].d(1);l.length=i.length}if(h&30){m=q(["2019","2020","2021","2022","2023"]);let s;for(s=0;s<5;s+=1){const g=un(u,m,s);c[s]?c[s].p(g,h):(c[s]=mn(g),c[s].c(),c[s].m(o.parentNode,o))}for(;s<5;s+=1)c[s].d(1)}},d(u){u&&(d(n),d(r),d(o)),de(l,u),de(c,u)}}}function hn(e){let t,n,r,o;return{c(){t=B("line"),this.h()},l(i){t=R(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),E(t).forEach(d),this.h()},h(){a(t,"x1",n=e[2](e[21].date)),a(t,"y1",r=e[4](e[21].sumValue)),a(t,"x2",o=e[2](e[21].date)),a(t,"y2",115),pe(t,"stroke","#F1C500"),pe(t,"stroke-width","3"),pe(t,"opacity","0.42")},m(i,l){D(i,t,l)},p(i,l){l&6&&n!==(n=i[2](i[21].date))&&a(t,"x1",n),l&2&&r!==(r=i[4](i[21].sumValue))&&a(t,"y1",r),l&6&&o!==(o=i[2](i[21].date))&&a(t,"x2",o)},d(i){i&&d(t)}}}function Lo(e){let t,n,r,o,i=Math.round(e[16].yearlyData[e[10]].sum)+"",l,m;return{c(){t=B("line"),o=B("text"),l=ie(i),this.h()},l(c){t=R(c,"line",{x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),E(t).forEach(d),o=R(c,"text",{x:!0,y:!0,"text-anchor":!0,id:!0,"font-size":!0,class:!0});var u=E(o);l=le(u,i),u.forEach(d),this.h()},h(){a(t,"x1",n=e[2](e[3](e[10]+"-01"))),a(t,"y1","35"),a(t,"x2",r=e[2](e[3](e[10]+"-12"))),a(t,"y2","35"),pe(t,"stroke","#ab1269"),pe(t,"stroke-width","2"),a(o,"x",m=e[2](e[3](e[10]+"-01"))+27.6/2),a(o,"y","33"),a(o,"text-anchor","middle"),a(o,"id","avgLabel"),a(o,"font-size","12"),a(o,"class","svelte-1czd5nw")},m(c,u){D(c,t,u),D(c,o,u),v(o,l)},p(c,u){u&4&&n!==(n=c[2](c[3](c[10]+"-01")))&&a(t,"x1",n),u&4&&r!==(r=c[2](c[3](c[10]+"-12")))&&a(t,"x2",r),u&2&&i!==(i=Math.round(c[16].yearlyData[c[10]].sum)+"")&&Ue(l,i),u&4&&m!==(m=c[2](c[3](c[10]+"-01"))+27.6/2)&&a(o,"x",m)},d(c){c&&(d(t),d(o))}}}function Oo(e){let t,n,r,o,i,l,m=Math.round(e[16].yearlyData[e[10]].sum)+"",c,u,h;return{c(){t=B("line"),l=B("text"),c=ie(m),this.h()},l(s){t=R(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),E(t).forEach(d),l=R(s,"text",{x:!0,y:!0,"text-anchor":!0,id:!0,"font-size":!0,class:!0});var g=E(l);c=le(g,m),g.forEach(d),this.h()},h(){a(t,"x1",n=e[2](e[3](e[10]+"-01"))),a(t,"y1",r=e[4](e[16].yearlyData[e[10]].sum/e[16].yearlyData[e[10]].count)),a(t,"x2",o=e[2](e[3](e[10]+"-12"))),a(t,"y2",i=e[4](e[16].yearlyData[e[10]].sum/e[16].yearlyData[e[10]].count)),pe(t,"stroke","#ab1269"),pe(t,"stroke-width","2"),a(l,"x",u=e[2](e[3](e[10]+"-01"))+27.6/2),a(l,"y",h=e[4](e[16].yearlyData[e[10]].sum/e[16].yearlyData[e[10]].count)-2),a(l,"text-anchor","middle"),a(l,"id","avgLabel"),a(l,"font-size","12"),a(l,"class","svelte-1czd5nw")},m(s,g){D(s,t,g),D(s,l,g),v(l,c)},p(s,g){g&4&&n!==(n=s[2](s[3](s[10]+"-01")))&&a(t,"x1",n),g&2&&r!==(r=s[4](s[16].yearlyData[s[10]].sum/s[16].yearlyData[s[10]].count))&&a(t,"y1",r),g&4&&o!==(o=s[2](s[3](s[10]+"-12")))&&a(t,"x2",o),g&2&&i!==(i=s[4](s[16].yearlyData[s[10]].sum/s[16].yearlyData[s[10]].count))&&a(t,"y2",i),g&2&&m!==(m=Math.round(s[16].yearlyData[s[10]].sum)+"")&&Ue(c,m),g&4&&u!==(u=s[2](s[3](s[10]+"-01"))+27.6/2)&&a(l,"x",u),g&2&&h!==(h=s[4](s[16].yearlyData[s[10]].sum/s[16].yearlyData[s[10]].count)-2)&&a(l,"y",h)},d(s){s&&(d(t),d(l))}}}function mn(e){let t,n;function r(l,m){return m&2&&(t=null),t==null&&(t=l[4](l[16].yearlyData[l[10]].sum/l[16].yearlyData[l[10]].count)>35),t?Oo:Lo}let o=r(e,-1),i=o(e);return{c(){i.c(),n=ne()},l(l){i.l(l),n=ne()},m(l,m){i.m(l,m),D(l,n,m)},p(l,m){o===(o=r(l,m))&&i?i.p(l,m):(i.d(1),i=o(l),i&&(i.c(),i.m(n.parentNode,n)))},d(l){l&&d(n),i.d(l)}}}function gn(e){let t,n=e[7]===e[16].GEO&&fn(e);return{c(){n&&n.c(),t=ne()},l(r){n&&n.l(r),t=ne()},m(r,o){n&&n.m(r,o),D(r,t,o)},p(r,o){r[7]===r[16].GEO?n?n.p(r,o):(n=fn(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&d(t),n&&n.d(r)}}}function Ho(e){let t;return{c(){t=B("line"),this.h()},l(n){t=R(n,"line",{x1:!0,y1:!0,x2:!0,y2:!0,style:!0}),E(t).forEach(d),this.h()},h(){a(t,"x1",6+e[13]*27.6),a(t,"y1","115"),a(t,"x2",6+e[13]*27.6),a(t,"y2","120"),pe(t,"stroke","#1470ad"),pe(t,"stroke-width","1")},m(n,r){D(n,t,r)},p:ve,d(n){n&&d(t)}}}function Yo(e){let t,n;return{c(){t=B("text"),n=ie(e[10]),this.h()},l(r){t=R(r,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var o=E(t);n=le(o,e[10]),o.forEach(d),this.h()},h(){a(t,"x",20+e[12]*27.6),a(t,"y","127"),a(t,"id","cityLabel"),a(t,"text-anchor","middle"),a(t,"font-size","15"),a(t,"class","svelte-1czd5nw")},m(r,o){D(r,t,o),v(t,n)},p:ve,d(r){r&&d(t)}}}function dn(e){let t,n,r,o=e[7].split(",")[0]+"",i,l,m,c=q(e[1]),u=[];for(let f=0;f<c.length;f+=1)u[f]=gn(sn(e,c,f));let h=q([0,1,2,3,4,5]),s=[];for(let f=0;f<6;f+=1)s[f]=Ho(Ao(e,h,f));let g=q([19,20,21,22,23]),p=[];for(let f=0;f<5;f+=1)p[f]=Yo(Fo(e,g,f));return{c(){t=U("div"),n=B("svg");for(let f=0;f<u.length;f+=1)u[f].c();r=B("text"),i=ie(o);for(let f=0;f<6;f+=1)s[f].c();l=ne();for(let f=0;f<5;f+=1)p[f].c();m=$(),this.h()},l(f){t=x(f,"DIV",{class:!0});var b=E(t);n=R(b,"svg",{height:!0,width:!0,id:!0});var C=E(n);for(let I=0;I<u.length;I+=1)u[I].l(C);r=R(C,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var L=E(r);i=le(L,o),L.forEach(d);for(let I=0;I<6;I+=1)s[I].l(C);l=ne();for(let I=0;I<5;I+=1)p[I].l(C);C.forEach(d),m=G(b),b.forEach(d),this.h()},h(){a(r,"x","5"),a(r,"y",20),a(r,"id","cityLabel"),a(r,"text-anchor","start"),a(r,"font-size","15"),a(r,"class","svelte-1czd5nw"),a(n,"height",145),a(n,"width",145),a(n,"id","svgChart"),a(t,"class","chart svelte-1czd5nw")},m(f,b){D(f,t,b),v(t,n);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(n,null);v(n,r),v(r,i);for(let C=0;C<6;C+=1)s[C]&&s[C].m(n,null);v(n,l);for(let C=0;C<5;C+=1)p[C]&&p[C].m(n,null);v(t,m)},p(f,b){if(b&31){c=q(f[1]);let C;for(C=0;C<c.length;C+=1){const L=sn(f,c,C);u[C]?u[C].p(L,b):(u[C]=gn(L),u[C].c(),u[C].m(n,r))}for(;C<u.length;C+=1)u[C].d(1);u.length=c.length}b&1&&o!==(o=f[7].split(",")[0]+"")&&Ue(i,o)},d(f){f&&d(t),de(u,f),de(s,f),de(p,f)}}}function Vo(e){let t,n=q(e[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=dn(an(e,n,o));return{c(){t=U("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){t=x(o,"DIV",{id:!0,class:!0});var i=E(t);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach(d),this.h()},h(){a(t,"id","chartWrapper"),a(t,"class","svelte-1czd5nw")},m(o,i){D(o,t,i);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(t,null)},p(o,[i]){if(i&31){n=q(o[0]);let l;for(l=0;l<n.length;l+=1){const m=an(o,n,l);r[l]?r[l].p(m,i):(r[l]=dn(m),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:ve,o:ve,d(o){o&&d(t),de(r,o)}}}function zo(e,t,n){let r,o,i,{data:l}=t,{cities:m}=t;const c=zn("%Y-%m");let u;return e.$$set=h=>{"data"in h&&n(5,l=h.data),"cities"in h&&n(0,m=h.cities)},e.$$.update=()=>{e.$$.dirty&32&&n(6,r=Mt(l.filter(h=>!h.Type.includes("new")),h=>h.GEO,h=>h.REF_DATE)),e.$$.dirty&64&&n(1,o=Array.from(r,([h,s])=>({GEO:h,sums:Array.from(s,([g,p])=>({date:g,sumValue:kt(p,f=>f.VALUE)}))}))),e.$$.dirty&3&&n(1,o=o.filter(h=>m.includes(h.GEO))),e.$$.dirty&2&&o.forEach(h=>{h.sums.forEach(s=>{s.date=c(s.date)}),h.maxValue=Math.max(...h.sums.map(s=>s.sumValue)),h.mean=Jn(h.sums.map(s=>s.sumValue))}),e.$$.dirty&2&&o.forEach(h=>{const s={};h.sums.forEach(g=>{const f=new Date(g.date).getUTCFullYear();s[f]||(s[f]={sum:0,count:0}),s[f].sum+=g.sumValue,s[f].count++}),h.yearlyData=s})},n(2,i=Co().domain([c("2019-01"),c("2023-12")]).range([6,144])),[m,o,i,c,u,l,r]}class Wo extends ot{constructor(t){super(),it(this,t,zo,Vo,rt,{data:5,cities:0})}}function _n(e,t,n){const r=e.slice();return r[5]=t[n],r}function vn(e,t,n){const r=e.slice();return r[8]=t[n],r}function pn(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function yn(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function wn(e){let t,n=q([0,1,2,3,4,5,6,7,8,9]),r=[];for(let o=0;o<10;o+=1)r[o]=Tn(pn(e,n,o));return{c(){for(let o=0;o<10;o+=1)r[o].c();t=ne()},l(o){for(let i=0;i<10;i+=1)r[i].l(o);t=ne()},m(o,i){for(let l=0;l<10;l+=1)r[l]&&r[l].m(o,i);D(o,t,i)},p(o,i){if(i&2){n=q([0,1,2,3,4,5,6,7,8,9]);let l;for(l=0;l<10;l+=1){const m=pn(o,n,l);r[l]?r[l].p(m,i):(r[l]=Tn(m),r[l].c(),r[l].m(t.parentNode,t))}for(;l<10;l+=1)r[l].d(1)}},d(o){o&&d(t),de(r,o)}}}function No(e){let t;return{c(){t=B("rect"),this.h()},l(n){t=R(n,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),E(t).forEach(d),this.h()},h(){a(t,"x",5+Ge*e[14]),a(t,"y",25+Ge*e[11]),a(t,"width",$e),a(t,"height",$e),a(t,"fill","#ce6c35")},m(n,r){D(n,t,r)},p:ve,d(n){n&&d(t)}}}function Io(e){let t;return{c(){t=B("rect"),this.h()},l(n){t=R(n,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),E(t).forEach(d),this.h()},h(){a(t,"x",5+Ge*e[14]),a(t,"y",25+Ge*e[11]),a(t,"width",$e),a(t,"height",$e),a(t,"fill","#F1C500")},m(n,r){D(n,t,r)},p:ve,d(n){n&&d(t)}}}function Bo(e){let t;return{c(){t=B("rect"),this.h()},l(n){t=R(n,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),E(t).forEach(d),this.h()},h(){a(t,"x",5+Ge*e[14]),a(t,"y",25+Ge*e[11]),a(t,"width",$e),a(t,"height",$e),a(t,"fill","#3597CE")},m(n,r){D(n,t,r)},p:ve,d(n){n&&d(t)}}}function bn(e){let t;function n(i,l){return i[16]+i[13]*10<i[8].PerNtoR?Bo:i[16]+i[13]*10<i[8].PerNtoR+i[8].PerStoM?Io:No}let r=n(e),o=r(e);return{c(){o.c(),t=ne()},l(i){o.l(i),t=ne()},m(i,l){o.m(i,l),D(i,t,l)},p(i,l){r===(r=n(i))&&o?o.p(i,l):(o.d(1),o=r(i),o&&(o.c(),o.m(t.parentNode,t)))},d(i){i&&d(t),o.d(i)}}}function Tn(e){let t,n=q([0,1,2,3,4,5,6,7,8,9]),r=[];for(let o=0;o<10;o+=1)r[o]=bn(yn(e,n,o));return{c(){for(let o=0;o<10;o+=1)r[o].c();t=ne()},l(o){for(let i=0;i<10;i+=1)r[i].l(o);t=ne()},m(o,i){for(let l=0;l<10;l+=1)r[l]&&r[l].m(o,i);D(o,t,i)},p(o,i){if(i&2){n=q([0,1,2,3,4,5,6,7,8,9]);let l;for(l=0;l<10;l+=1){const m=yn(o,n,l);r[l]?r[l].p(m,i):(r[l]=bn(m),r[l].c(),r[l].m(t.parentNode,t))}for(;l<10;l+=1)r[l].d(1)}},d(o){o&&d(t),de(r,o)}}}function Cn(e){let t,n=e[5]===e[8].GEO&&wn(e);return{c(){n&&n.c(),t=ne()},l(r){n&&n.l(r),t=ne()},m(r,o){n&&n.m(r,o),D(r,t,o)},p(r,o){r[5]===r[8].GEO?n?n.p(r,o):(n=wn(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&d(t),n&&n.d(r)}}}function Mn(e){let t,n,r,o=e[5].split(",")[0]+"",i,l,m=q(e[1]),c=[];for(let u=0;u<m.length;u+=1)c[u]=Cn(vn(e,m,u));return{c(){t=U("div"),n=B("svg"),r=B("text"),i=ie(o);for(let u=0;u<c.length;u+=1)c[u].c();l=$(),this.h()},l(u){t=x(u,"DIV",{class:!0});var h=E(t);n=R(h,"svg",{height:!0,width:!0,id:!0});var s=E(n);r=R(s,"text",{x:!0,y:!0,id:!0,"text-anchor":!0,"font-size":!0,class:!0});var g=E(r);i=le(g,o),g.forEach(d);for(let p=0;p<c.length;p+=1)c[p].l(s);s.forEach(d),l=G(h),h.forEach(d),this.h()},h(){a(r,"x","5"),a(r,"y",20),a(r,"id","cityLabel"),a(r,"text-anchor","start"),a(r,"font-size","15"),a(r,"class","svelte-9wop4q"),a(n,"height",145),a(n,"width",126),a(n,"id","svgChart"),a(t,"class","chart svelte-9wop4q")},m(u,h){D(u,t,h),v(t,n),v(n,r),v(r,i);for(let s=0;s<c.length;s+=1)c[s]&&c[s].m(n,null);v(t,l)},p(u,h){if(h&1&&o!==(o=u[5].split(",")[0]+"")&&Ue(i,o),h&3){m=q(u[1]);let s;for(s=0;s<m.length;s+=1){const g=vn(u,m,s);c[s]?c[s].p(g,h):(c[s]=Cn(g),c[s].c(),c[s].m(n,null))}for(;s<c.length;s+=1)c[s].d(1);c.length=m.length}},d(u){u&&d(t),de(c,u)}}}function Ro(e){let t,n=q(e[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=Mn(_n(e,n,o));return{c(){t=U("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){t=x(o,"DIV",{id:!0,class:!0});var i=E(t);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach(d),this.h()},h(){a(t,"id","chartWrapper"),a(t,"class","svelte-9wop4q")},m(o,i){D(o,t,i);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(t,null)},p(o,[i]){if(i&3){n=q(o[0]);let l;for(l=0;l<n.length;l+=1){const m=_n(o,n,l);r[l]?r[l].p(m,i):(r[l]=Mn(m),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},i:ve,o:ve,d(o){o&&d(t),de(r,o)}}}let $e=9,Ge=12;function Po(e){const t=e.reduce((o,i)=>o+i,0),n=e.map(o=>Math.round(o)),r=Math.floor(t)-n.reduce((o,i)=>o+i,0);for(let o=0;o<r;o++)if(e[o]!==0){n[o]++;break}return n}function $o(e,t,n){let r,o,i,{data:l}=t,{cities:m}=t;return e.$$set=c=>{"data"in c&&n(2,l=c.data),"cities"in c&&n(0,m=c.cities)},e.$$.update=()=>{e.$$.dirty&4&&n(4,r=Mt(l,c=>c.GEO,c=>c.Type)),e.$$.dirty&16&&n(3,o=Array.from(r,([c,u])=>({GEO:c,sums:Array.from(u,([h,s])=>({Type:h,sumValue:kt(s,g=>g.VALUE)}))}))),e.$$.dirty&9&&n(3,o=o.filter(c=>m.includes(c.GEO))),e.$$.dirty&8&&n(1,i=o.map(c=>{const u=c.sums.filter(p=>p.Type!=="new").reduce((p,f)=>p+f.sumValue,0);let h=Math.round(100*c.sums.filter(p=>p.Type==="m-to-m")[0].sumValue/u),s=Math.round(100*c.sums.filter(p=>p.Type==="s-to-m")[0].sumValue/u),g=Math.round(100*c.sums.filter(p=>p.Type==="n-to-r")[0].sumValue/u);return[h,s,g]=Po([h,s,g]),{GEO:c.GEO,PerMtoM:h,PerStoM:s,PerNtoR:g}})),e.$$.dirty&2&&console.log(i)},[m,i,l,o,r]}class Go extends ot{constructor(t){super(),it(this,t,$o,Ro,rt,{data:2,cities:0})}}var kn={},wt={},bt=34,nt=10,Tt=13;function Nn(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jo(e,t){var n=Nn(e);return function(r,o){return t(n(r),o,e)}}function Dn(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var o in r)o in t||n.push(t[o]=o)}),n}function _e(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function qo(e){return e<0?"-"+_e(-e,6):e>9999?"+"+_e(e,6):_e(e,4)}function Qo(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":qo(e.getUTCFullYear())+"-"+_e(e.getUTCMonth()+1,2)+"-"+_e(e.getUTCDate(),2)+(o?"T"+_e(t,2)+":"+_e(n,2)+":"+_e(r,2)+"."+_e(o,3)+"Z":r?"T"+_e(t,2)+":"+_e(n,2)+":"+_e(r,2)+"Z":n||t?"T"+_e(t,2)+":"+_e(n,2)+"Z":"")}function Zo(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(s,g){var p,f,b=o(s,function(C,L){if(p)return p(C,L-1);f=C,p=g?jo(C,g):Nn(C)});return b.columns=f||[],b}function o(s,g){var p=[],f=s.length,b=0,C=0,L,I=f<=0,O=!1;s.charCodeAt(f-1)===nt&&--f,s.charCodeAt(f-1)===Tt&&--f;function z(){if(I)return wt;if(O)return O=!1,kn;var M,k=b,P;if(s.charCodeAt(k)===bt){for(;b++<f&&s.charCodeAt(b)!==bt||s.charCodeAt(++b)===bt;);return(M=b)>=f?I=!0:(P=s.charCodeAt(b++))===nt?O=!0:P===Tt&&(O=!0,s.charCodeAt(b)===nt&&++b),s.slice(k+1,M-1).replace(/""/g,'"')}for(;b<f;){if((P=s.charCodeAt(M=b++))===nt)O=!0;else if(P===Tt)O=!0,s.charCodeAt(b)===nt&&++b;else if(P!==n)continue;return s.slice(k,M)}return I=!0,s.slice(k,f)}for(;(L=z())!==wt;){for(var S=[];L!==kn&&L!==wt;)S.push(L),L=z();g&&(S=g(S,C++))==null||p.push(S)}return p}function i(s,g){return s.map(function(p){return g.map(function(f){return h(p[f])}).join(e)})}function l(s,g){return g==null&&(g=Dn(s)),[g.map(h).join(e)].concat(i(s,g)).join(`
`)}function m(s,g){return g==null&&(g=Dn(s)),i(s,g).join(`
`)}function c(s){return s.map(u).join(`
`)}function u(s){return s.map(h).join(e)}function h(s){return s==null?"":s instanceof Date?Qo(s):t.test(s+="")?'"'+s.replace(/"/g,'""')+'"':s}return{parse:r,parseRows:o,format:l,formatBody:m,formatRows:c,formatRow:u,formatValue:h}}var Jo=Zo(","),Xo=Jo.parse;function Ko(e){let t,n,r,o,i,l,m,c,u,h,s,g,p,f,b,C,L,I,O,z,S='<div class="title"><h1>Tracking Residential Dwelling Conversions</h1> <h2>An Exploration of Canadian Building Permit Survey Data</h2> <h2></h2> <p><a href="https://jamaps.github.io" target="_blank">Jeff Allen</a> </p><p>July 2024</p></div>',M,k,P,ae="<p>▼</p>",he,W,K,Me='Many Canadian cities need more housing, both now and in the near future. While urban sprawl consumes green spaces and strains resources, the conversion and expansion of existing buildings offer a more sustainable path forward. Research in Canada has shown that <a href="https://imfg.org/research/doc/?doc_id=637" target="_blank">urban sprawl has far worse impacts on climate change than infill development</a>. Moreover, <a href="https://csbe.civmin.utoronto.ca/wp-content/uploads/2023/11/khr_Saxe_FIG2023.pdf" target="_blank">maintaining existing building stock</a> to help construct new units can reduce emissions related to procuring and transporting new building material.',Se,me,ee="There are a variety of building conversions: altering a single-family home to create additional dwelling units (a basement apartment for example); a duplex expanding into a triplex or fourplex; or converting a previously non-residential building into residential units.",ye,Q,Te="On this page, we chart how different Canadian urban regions are doing in terms of creating new residential dwelling units from building conversions, over the five year period of 2019 to 2023.",X,ge,te='The data are sourced from Statistics Canada&#39;s <a href="https://www23.statcan.gc.ca/imdb/p2SV.pl?Function=getSurvey&amp;Id=418552&amp;" target="_blank">Building Permit Survey</a>. This survey tracks attributes of building permits by Census Metropolitan Area (CMA) on a monthly basis. The survey includes the number of new dwelling units that were created due to building conversions, and has categories for three types of conversions (a. non-residential to residential, b. single dwelling to multiple dwellings, and c. multiple to multiple).',y,H,w="Overall across Canada there were <b>104,425</b> new dwelling units created via conversions in the five-year period from 01/2019 to 12/2023. This accounts for <b>7.9%</b> of all new residential dwelling units created during this period, based on the data recorded in the building permit survey. Below we chart how this varies by CMA, trends over time, as well as different types of building conversions.",Z,Fe,Ae,T,F,A,_=`<h3>New dwellings from building conversions, 01/2019 to 12/2023</h3> <p style="font-size: 15px"><svg height="15" width="28"><text x="14" y="11" text-anchor="middle" font-size="12" style="fill: #ab1269;">100</text><line x1="0" y1="14" x2="28" y2="14" style="stroke: #ab1269; stroke-width: 3;"></line></svg>
				Yearly totals
				<svg height="25" width="25"><line x1="5" y1="20" x2="5" y2="25" style="stroke:#F1C500; stroke-width:5; opacity: 0.42"></line><line x1="10" y1="15" x2="10" y2="25" style="stroke:#F1C500; stroke-width:5; opacity: 0.42"></line><line x1="15" y1="5" x2="15" y2="25" style="stroke:#F1C500; stroke-width:5; opacity: 0.42"></line><line x1="20" y1="10" x2="20" y2="25" style="stroke:#F1C500; stroke-width:5; opacity: 0.42"></line></svg>
				Monthly trends</p>`,re,Y,oe,V,Ce='<h3>Proportion of new dwellings by type of building conversion</h3> <div style="margin-top: -15px"><svg height="25" width="300"><text x="0" y="12" id="years" text-anchor="start" font-size="16" class="svelte-143n11e">01/2019 to 12/2023 (5 years total)</text></svg></div> <p style="font-size: 15px; margin-bottom: -25px"><svg height="100" width="400"><text x="0" y="12" text-anchor="start" font-size="16" style="fill: #1470ad;">One square = 1% of new dwellings from conversions</text><rect x="0" y="27" width="9" height="9" fill="#3597CE"></rect><text x="15" y="37" text-anchor="start" font-size="16" style="fill: #1470ad;">Non-residential to residential</text><rect x="0" y="52" width="9" height="9" fill="#F1C500"></rect><text x="15" y="62" text-anchor="start" font-size="16" style="fill: #1470ad;">Single dwelling to multiple dwellings</text><rect x="0" y="77" width="9" height="9" fill="#ce6c35"></rect><text x="15" y="87" text-anchor="start" font-size="16" style="fill: #1470ad;">Multiple dwellings to multiple dwellings</text></svg></p>',Ne,Le,mt,Oe,Ft='<p>Code for this page is hosted on a <a href="https://github.com/schoolofcities/gentle-density" target="_blank">GitHub repository</a>. The subset of Building Permit Survey data shown on these charts can be accessed <a href="https://raw.githubusercontent.com/schoolofcities/gentle-density/main/static/conversions-canada-2018-to-2024.csv" target="_blank">as a .csv file by clicking here</a>. The full dataset, including many other types of building permits, can be queried and downloaded from <a href="https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=3410028501" target="_blank">Statistics Canada</a>.</p>',gt,He,at;return L=new $n({}),T=new So({props:{data:e[0],cities:e[1]}}),Y=new Wo({props:{data:e[0],cities:e[1]}}),Le=new Go({props:{data:e[0],cities:e[1]}}),He=new Uo({props:{currentPage:"canadian-residential-conversions"}}),{c(){t=U("meta"),n=U("meta"),r=U("meta"),o=U("meta"),i=U("meta"),l=U("meta"),m=U("meta"),c=U("meta"),u=U("meta"),h=U("meta"),s=U("meta"),g=U("meta"),p=U("meta"),f=U("meta"),b=U("meta"),C=$(),je(L.$$.fragment),I=$(),O=U("main"),z=U("div"),z.innerHTML=S,M=$(),k=U("div"),P=U("div"),P.innerHTML=ae,he=$(),W=U("div"),K=U("p"),K.innerHTML=Me,Se=$(),me=U("p"),me.textContent=ee,ye=$(),Q=U("p"),Q.textContent=Te,X=$(),ge=U("p"),ge.innerHTML=te,y=$(),H=U("p"),H.innerHTML=w,Z=$(),Fe=U("br"),Ae=$(),je(T.$$.fragment),F=$(),A=U("div"),A.innerHTML=_,re=$(),je(Y.$$.fragment),oe=$(),V=U("div"),V.innerHTML=Ce,Ne=$(),je(Le.$$.fragment),mt=$(),Oe=U("div"),Oe.innerHTML=Ft,gt=$(),je(He.$$.fragment),this.h()},l(j){const J=Rn("svelte-iwu35y",document.head);t=x(J,"META",{name:!0,content:!0}),n=x(J,"META",{name:!0,content:!0}),r=x(J,"META",{name:!0,content:!0}),o=x(J,"META",{property:!0,content:!0}),i=x(J,"META",{property:!0,content:!0}),l=x(J,"META",{property:!0,content:!0}),m=x(J,"META",{property:!0,content:!0}),c=x(J,"META",{property:!0,content:!0}),u=x(J,"META",{property:!0,content:!0}),h=x(J,"META",{name:!0,content:!0}),s=x(J,"META",{name:!0,content:!0}),g=x(J,"META",{name:!0,content:!0}),p=x(J,"META",{name:!0,content:!0}),f=x(J,"META",{name:!0,content:!0}),b=x(J,"META",{name:!0,content:!0}),J.forEach(d),C=G(j),qe(L.$$.fragment,j),I=G(j),O=x(j,"MAIN",{});var Ye=E(O);z=x(Ye,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),we(z)!=="svelte-1b4pu1x"&&(z.innerHTML=S),M=G(Ye),k=x(Ye,"DIV",{class:!0});var se=E(k);P=x(se,"DIV",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-1s98lsq"&&(P.innerHTML=ae),he=G(se),W=x(se,"DIV",{class:!0});var fe=E(W);K=x(fe,"P",{"data-svelte-h":!0}),we(K)!=="svelte-19t3y5t"&&(K.innerHTML=Me),Se=G(fe),me=x(fe,"P",{"data-svelte-h":!0}),we(me)!=="svelte-9ij9lg"&&(me.textContent=ee),ye=G(fe),Q=x(fe,"P",{"data-svelte-h":!0}),we(Q)!=="svelte-18isnzl"&&(Q.textContent=Te),X=G(fe),ge=x(fe,"P",{"data-svelte-h":!0}),we(ge)!=="svelte-1agh4sb"&&(ge.innerHTML=te),y=G(fe),H=x(fe,"P",{"data-svelte-h":!0}),we(H)!=="svelte-1pek1vq"&&(H.innerHTML=w),Z=G(fe),Fe=x(fe,"BR",{}),Ae=G(fe),qe(T.$$.fragment,fe),fe.forEach(d),F=G(se),A=x(se,"DIV",{class:!0,"data-svelte-h":!0}),we(A)!=="svelte-1eecfim"&&(A.innerHTML=_),re=G(se),qe(Y.$$.fragment,se),oe=G(se),V=x(se,"DIV",{class:!0,"data-svelte-h":!0}),we(V)!=="svelte-10fv0b3"&&(V.innerHTML=Ce),Ne=G(se),qe(Le.$$.fragment,se),mt=G(se),Oe=x(se,"DIV",{class:!0,"data-svelte-h":!0}),we(Oe)!=="svelte-1i7mwzp"&&(Oe.innerHTML=Ft),gt=G(se),qe(He.$$.fragment,se),se.forEach(d),Ye.forEach(d),this.h()},h(){a(t,"name","viewport"),a(t,"content","width=device-width, initial-scale=1, minimum-scale=1"),document.title="Residential Conversions Across Canada | School of Cities",a(n,"name","description"),a(n,"content","Tracking residential dwelling conversions. An exploration of Canadian building permit survey data"),a(r,"name","author"),a(r,"content","Jeff Allen"),a(o,"property","og:title"),a(o,"content","Residential Conversions Across Canada"),a(i,"property","og:description"),a(i,"content","Tracking residential dwelling conversions. An exploration of Canadian building permit survey data"),a(l,"property","og:type"),a(l,"content","website"),a(m,"property","og:url"),a(m,"content","https://schoolofcities.github.io/gentle-density/canadian-residential-conversions"),a(c,"property","og:image"),a(c,"content","https://raw.githubusercontent.com/schoolofcities/gentle-density/main/static/web-card-conversions.png"),a(u,"property","og:locale"),a(u,"content","en_CA"),a(h,"name","twitter:card"),a(h,"content","summary_large_image"),a(s,"name","twitter:site"),a(s,"content","https://schoolofcities.github.io/gentle-density/canadian-residential-conversions"),a(g,"name","twitter:creator"),a(g,"content","@JeffAllenMaps"),a(p,"name","twitter:title"),a(p,"content","Residential Conversions Across Canada"),a(f,"name","twitter:description"),a(f,"content","Tracking residential dwelling conversions. An exploration of Canadian building permit survey data"),a(b,"name","twitter:image"),a(b,"content","https://raw.githubusercontent.com/schoolofcities/gentle-density/main/static/web-card-conversions.png"),a(z,"class","blueprint"),pe(z,"background-image","url('../gentle-density/blueprint-background-convert.png')"),a(P,"class","arrow"),a(W,"class","text"),a(A,"class","text"),a(V,"class","text"),a(Oe,"class","text"),a(k,"class","background-white svelte-143n11e")},m(j,J){v(document.head,t),v(document.head,n),v(document.head,r),v(document.head,o),v(document.head,i),v(document.head,l),v(document.head,m),v(document.head,c),v(document.head,u),v(document.head,h),v(document.head,s),v(document.head,g),v(document.head,p),v(document.head,f),v(document.head,b),D(j,C,J),Qe(L,j,J),D(j,I,J),D(j,O,J),v(O,z),v(O,M),v(O,k),v(k,P),v(k,he),v(k,W),v(W,K),v(W,Se),v(W,me),v(W,ye),v(W,Q),v(W,X),v(W,ge),v(W,y),v(W,H),v(W,Z),v(W,Fe),v(W,Ae),Qe(T,W,null),v(k,F),v(k,A),v(k,re),Qe(Y,k,null),v(k,oe),v(k,V),v(k,Ne),Qe(Le,k,null),v(k,mt),v(k,Oe),v(k,gt),Qe(He,k,null),at=!0},p(j,[J]){const Ye={};J&1&&(Ye.data=j[0]),T.$set(Ye);const se={};J&1&&(se.data=j[0]),Y.$set(se);const fe={};J&1&&(fe.data=j[0]),Le.$set(fe)},i(j){at||(Ze(L.$$.fragment,j),Ze(T.$$.fragment,j),Ze(Y.$$.fragment,j),Ze(Le.$$.fragment,j),Ze(He.$$.fragment,j),at=!0)},o(j){Je(L.$$.fragment,j),Je(T.$$.fragment,j),Je(Y.$$.fragment,j),Je(Le.$$.fragment,j),Je(He.$$.fragment,j),at=!1},d(j){j&&(d(C),d(I),d(O)),d(t),d(n),d(r),d(o),d(i),d(l),d(m),d(c),d(u),d(h),d(s),d(g),d(p),d(f),d(b),Xe(L,j),Xe(T),Xe(Y),Xe(Le),Xe(He)}}}function ei(e,t,n){let r=[];async function o(){try{const m=await(await fetch("conversions-canada-2018-to-2024.csv")).text();n(0,r=Xo(m)),n(0,r=r.filter(c=>!c.REF_DATE.includes("2024"))),n(0,r=r.filter(c=>!c.REF_DATE.includes("2018"))),r.forEach(c=>{c.VALUE=parseFloat(c.VALUE)})}catch(l){console.error("Error loading CSV data:",l)}}return Pn(()=>{o()}),[r,["All Canada","Abbotsford-Mission, British Columbia","Barrie, Ontario","Belleville-Quinte West, Ontario","Brantford, Ontario","Calgary, Alberta","Chilliwack, British Columbia","Edmonton, Alberta","Fredericton, New Brunswick","Greater Sudbury, Ontario","Guelph, Ontario","Halifax, Nova Scotia","Hamilton, Ontario","Kamloops, British Columbia","Kelowna, British Columbia","Kingston, Ontario","Kitchener-Cambridge-Waterloo, Ontario","Lethbridge, Alberta","London, Ontario","Moncton, New Brunswick","Montréal, Quebec","Nanaimo, British Columbia","Oshawa, Ontario","Ottawa-Gatineau, Ontario-Quebec","Québec, Quebec","Peterborough, Ontario","Regina, Saskatchewan","Saguenay, Quebec","Saint John, New Brunswick","Saskatoon, Saskatchewan","Sherbrooke, Quebec","St. Catharines-Niagara, Ontario","St. John's, Newfoundland and Labrador","Thunder Bay, Ontario","Toronto, Ontario","Trois-Rivières, Quebec","Vancouver, British Columbia","Victoria, British Columbia","Windsor, Ontario","Winnipeg, Manitoba"]]}class si extends ot{constructor(t){super(),it(this,t,ei,Ko,rt,{})}}export{si as component,ai as universal};
